{% extends 'base.html' %}

{% block content %}
    <h1>Події та календар</h1>

    <h2>Фільтр подій</h2>
    <form method="GET" action="{% url 'events:event-list' %}">
        {{ form.date.label_tag }}
        {{ form.date }}
        <button type="submit" class="btn btn-primary">Фільтрувати</button>
    </form>

    <h2>Список подій</h2>
    {% if events %}
        <ul class="list-group">
            {% for event in events %}
                <li class="list-group-item">
                    <strong>{{ event.title }}</strong><br>
                    Дата початку: {{ event.start_date|date:"Y-m-d H:i" }}<br>
                    Місце: {{ event.location }}<br>
                    Опис: {{ event.description }}<br>
                    {% if user.is_authenticated and user.profile.role in 'admin,moderator' %}
                        <a href="{% url 'events:event-update' event.pk %}" class="btn btn-sm btn-warning">Редагувати</a>
                        <a href="{% url 'events:event-delete' event.pk %}" class="btn btn-sm btn-danger">Видалити</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Подій немає.</p>
    {% endif %}

    {% if user.is_authenticated and user.profile.role in 'admin,moderator' %}
        <a href="{% url 'events:event-create' %}" class="btn btn-primary mt-3">Додати подію</a>
    {% endif %}

{% endblock %}